"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}LearnosityAmd.define(["jquery-v1.10.2"],function($){var build_sandbox_html=function build_sandbox_html(id){var extra_setup=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var extra_prompt=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";return"\n    <code-cell id=\"".concat(id,"\">\n      <code data-type=\"setup\">\n        require(coursekata)\n        candy_rankings <- fivethirtyeight::candy_rankings %>%\n          mutate(nutty = peanutyalmondy, sugarpercent = sugarpercent * 100) %>%\n          select(competitorname, winpercent, chocolate, fruity, nutty, hard, bar, sugarpercent, pricepercent)\n        selfies <- readr::read_csv(\"https://docs.google.com/spreadsheets/d/1jqMg3-L4Z5bK5FCjCC2rv6Za4qzM5nq_Yn6k_rJmZ6M/export?format=csv\")\n        ").concat(extra_setup,"\n      </code>\n      <code data-type=\"prompt\">\n        ").concat(extra_prompt,"\n      </code>\n    </code-cell>\n  ")};var find_unique_id=function find_unique_id(existing_ids){var counter=existing_ids.length;var id="sandbox-".concat(counter);while(existing_ids.includes(id)){counter+=1;id="sandbox-".concat(counter)}return id};var ckcode_bundle="//cdn.jsdelivr.net/gh/UCLATALL/ckcode-learnosity-question@1.0/build/ckcode.bundle.js";var loading_script=false;function CKCodeFeature(init){var _init$feature$id,_init$feature,_init$feature2,_init$feature3,_init$feature4;var code_cells=document.querySelectorAll("code-cell");var existing_ids=_toConsumableArray(code_cells).map(function(element){return element.id});var id=(_init$feature$id=(_init$feature=init.feature)===null||_init$feature===void 0?void 0:_init$feature.id)!==null&&_init$feature$id!==void 0?_init$feature$id:find_unique_id(existing_ids);if((_init$feature2=init.feature)!==null&&_init$feature2!==void 0&&_init$feature2.id&&existing_ids.includes(init.feature.id)){console.warn("[ckcode-learnosity] The given ID ".concat(init.feature.id," already exists. Using new ID \"").concat(id,"\""))}init.$el.html(build_sandbox_html(id,((_init$feature3=init.feature)===null||_init$feature3===void 0?void 0:_init$feature3.extra_setup)||"",((_init$feature4=init.feature)===null||_init$feature4===void 0?void 0:_init$feature4.extra_prompt)||""));var already_loaded=typeof window.ckcode!=="undefined";if(already_loaded){window.ckcode.hookup_cells();init.events.trigger("ready")}else if(loading_script){init.events.trigger("ready")}else{loading_script=true;return $.ajax({dataType:"script",cache:true,url:ckcode_bundle,success:function success(){console.log("[ckcode-learnosity] Loaded script successfully!");init.events.trigger("ready")},error:function error(jqXHR,textStatus,errorThrown){console.log("[ckcode-learnosity] Error loading script: ",textStatus,errorThrown)},complete:function complete(){loading_script=false}})}}return{Feature:CKCodeFeature}});